{% extends 'base.html' %}

{% block content %} 
<div class="search-area mb-4">
    <form class="search-form d-flex" action="{{ url_for('search') }}" method="GET">
        <input type="text" name="search_query" class="form-control me-2" placeholder="Search customers...">
        <button type="submit" class="btn btn-outline-success">Search</button>
    </form>
</div>

<div class="customer-info-area mt-4">
    <h2 class="mb-3 text-center">Customer Details</h2>
    {% for customer in customers %}
        <div class="customer-card mb-4 p-3 bg-light border rounded">
            <p><strong>Customer ID:</strong> {{ customer.id }}</p>
            <p><strong>Name:</strong> {{ customer.name }}</p>
            <p><strong>Address:</strong> {{ customer.address }}</p>
            <p><strong>Email:</strong> {{ customer.email }}</p>
            <p><strong>Balance (SEK):</strong> {{ '%.2f'|format(customer.total_balance) }}</p>

            <h4 class="mt-3">Accounts</h4>
            <ul class="list-unstyled">
                {% for account in customer.accounts %}
                    <li>
                        <a href="{{ url_for('view_account_transactions', account_id=account.id) }}" class="text-decoration-none">Account Number: {{ account.account_number }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% else %}
        <div class="alert alert-warning" role="alert">
            No customer details available.
        </div>
    {% endfor %}
</div>
{% endblock %}
